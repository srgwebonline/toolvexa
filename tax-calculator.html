<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <!-- UPDATED: Brand name changed to Toolsedito -->
  <title>Income Tax Calculator 2026-27 - Calculate Your Taxes Online | Toolsedito</title>

  <!-- UPDATED: SEO Meta Tags -->
  <meta name="description" content="Free Income Tax Calculator for FY 2026-27. Calculate income tax liability, tax deductions, rebates, and net income instantly. Old vs New tax regime comparison." />
  <meta name="keywords" content="tax calculator, income tax calculator, tax calculation, income tax 2026, tax deductions, tax rebate, tax planning, new tax regime, old tax regime" />
  <meta name="author" content="Toolsedito Team" />
  <meta name="robots" content="index, follow" />
  <meta name="googlebot" content="index, follow" />
  <!-- UPDATED: Custom domain -->
  <link rel="canonical" href="https://www.toolsedito.com/tax-calculator.html" />

  <!-- UPDATED: Open Graph with new domain -->
  <meta property="og:type" content="website">
  <meta property="og:title" content="Income Tax Calculator 2026-27 - Calculate Your Taxes Online | Toolsedito">
  <meta property="og:description" content="Free Income Tax Calculator for FY 2026-27. Calculate income tax liability, tax deductions, rebates, and net income instantly. Old vs New tax regime comparison.">
  <meta property="og:url" content="https://www.toolsedito.com/tax-calculator.html">
  <meta property="og:image" content="https://www.toolsedito.com/images/tax-calculator-og.jpg">
  <meta property="twitter:card" content="summary_large_image">
  <meta property="twitter:title" content="Income Tax Calculator - Toolsedito">
  <meta property="twitter:description" content="Free Income Tax Calculator for FY 2026-27. Calculate income tax liability, tax deductions, rebates, and net income instantly.">

  <!-- UPDATED: JSON-LD Schema for Tax Calculator -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "WebApplication",
    "name": "Tax Calculator",
    "description": "Free online income tax calculator for FY 2026-27. Calculate tax liability under old and new tax regimes with deductions and rebates.",
    "url": "https://www.toolsedito.com/tax-calculator.html",
    "applicationCategory": "FinanceApplication",
    "operatingSystem": "Any",
    "offers": {
      "@type": "Offer",
      "price": "0",
      "priceCurrency": "USD"
    },
    "aggregateRating": {
      "@type": "AggregateRating",
      "ratingValue": "4.8",
      "ratingCount": "1200"
    },
    "author": {
      "@type": "Organization",
      "name": "Toolsedito",
      "url": "https://www.toolsedito.com"
    },
    "publisher": {
      "@type": "Organization",
      "name": "Toolsedito",
      "logo": {
        "@type": "ImageObject",
        "url": "https://www.toolsedito.com/logo.png"
      }
    }
  }
  </script>

  <!-- Fonts & Icons -->
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css">

  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    :root {
      --primary: #4f46e5;
      --primary-dark: #4338ca;
      --secondary: #10b981;
      --accent: #f59e0b;
      --light: #f8fafc;
      --dark: #1f2933;
      --gray: #6b7280;
      --light-gray: #f3f4f6;
      --card-bg: #ffffff;
      --card-shadow: 0 10px 25px rgba(0, 0, 0, 0.05);
      --hover-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
      --body-bg: var(--light);
      --text-color: var(--dark);
      --border-color: rgba(0, 0, 0, 0.05);
      --footer-bg: linear-gradient(135deg, #111827, #1f2937);
      --transition-speed: 0.3s;
      --danger: #ef4444;
      --success: #10b981;
      --warning: #f59e0b;
      --info: #3b82f6;
    }

    /* Dark Theme Variables */
    .dark-theme {
      --light: #121826;
      --dark: #f3f4f6;
      --gray: #9ca3af;
      --light-gray: #1f2937;
      --card-bg: #1a2332;
      --body-bg: #0f172a;
      --text-color: #f3f4f6;
      --border-color: rgba(255, 255, 255, 0.05);
      --card-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
      --hover-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
      --footer-bg: linear-gradient(135deg, #0f172a, #1e293b);
    }

    body {
      font-family: 'Inter', sans-serif;
      background-color: var(--body-bg);
      color: var(--text-color);
      line-height: 1.6;
      overflow-x: hidden;
      transition: background-color var(--transition-speed) ease,
                  color var(--transition-speed) ease;
    }

    h1, h2, h3, h4 {
      font-family: 'Poppins', sans-serif;
      font-weight: 700;
    }

    /* Theme Toggle Button */
    .theme-toggle {
      background: var(--light-gray);
      border: none;
      width: 44px;
      height: 44px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      color: var(--text-color);
      font-size: 1.2rem;
      transition: all var(--transition-speed) ease;
      margin-left: 10px;
    }

    .theme-toggle:hover {
      background: var(--primary);
      color: white;
      transform: rotate(15deg);
    }

    .theme-toggle i {
      transition: transform 0.5s ease;
    }

    .dark-theme .theme-toggle i.fa-sun {
      display: block;
    }

    .dark-theme .theme-toggle i.fa-moon {
      display: none;
    }

    .theme-toggle i.fa-sun {
      display: none;
    }

    .theme-toggle i.fa-moon {
      display: block;
    }

    /* Mobile First - Sidebar Implementation */
    .navbar {
      position: fixed;
      top: 0;
      width: 100%;
      background: rgba(255, 255, 255, 0.98);
      backdrop-filter: blur(10px);
      z-index: 1000;
      padding: 18px 0;
      box-shadow: 0 2px 20px rgba(0, 0, 0, 0.08);
      transition: all var(--transition-speed) ease;
    }

    .dark-theme .navbar {
      background: rgba(26, 35, 50, 0.98);
    }

    .nav-container {
      max-width: 1400px;
      margin: 0 auto;
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 0 20px;
    }

    .nav-logo {
      font-size: 1.8rem;
      font-weight: 800;
      color: var(--primary);
      text-decoration: none;
      display: flex;
      align-items: center;
      gap: 12px;
    }

    .nav-logo i {
      font-size: 1.6rem;
      background: linear-gradient(135deg, var(--primary), var(--secondary));
      -webkit-background-clip: text;
      background-clip: text;
      color: transparent;
    }

    /* Desktop Navigation - Hidden on Mobile */
    .nav-links {
      display: none;
    }

    /* Mobile Menu Button */
    .mobile-menu-btn {
      display: block;
      background: none;
      border: none;
      font-size: 1.5rem;
      color: var(--text-color);
      cursor: pointer;
      z-index: 1002;
      transition: color var(--transition-speed) ease;
    }

    /* Sidebar Styles */
    .sidebar {
      position: fixed;
      top: 0;
      right: -300px;
      width: 280px;
      height: 100vh;
      background: var(--card-bg);
      box-shadow: -5px 0 25px rgba(0, 0, 0, 0.1);
      z-index: 1001;
      transition: right 0.3s ease-in-out;
      padding: 80px 25px 30px;
      overflow-y: auto;
    }

    .dark-theme .sidebar {
      box-shadow: -5px 0 25px rgba(0, 0, 0, 0.3);
    }

    .sidebar.active {
      right: 0;
    }

    .sidebar-header {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      padding: 20px;
      background: var(--primary);
      color: white;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .sidebar-header .nav-logo {
      color: white;
      font-size: 1.3rem;
    }

    .sidebar-close {
      background: none;
      border: none;
      color: white;
      font-size: 1.5rem;
      cursor: pointer;
    }

    .sidebar-links {
      list-style: none;
      margin-top: 20px;
    }

    .sidebar-links li {
      margin-bottom: 15px;
    }

    .sidebar-links a {
      display: flex;
      align-items: center;
      gap: 12px;
      color: var(--text-color);
      text-decoration: none;
      font-weight: 500;
      padding: 12px 15px;
      border-radius: 8px;
      transition: all var(--transition-speed) ease;
    }

    .sidebar-links a:hover {
      background: var(--light-gray);
      color: var(--primary);
      transform: translateX(5px);
    }

    .sidebar-links a i {
      width: 20px;
      text-align: center;
    }

    .sidebar-links a.active {
      background: var(--primary);
      color: white;
    }

    .sidebar-divider {
      height: 1px;
      background: var(--border-color);
      margin: 20px 0;
    }

    .sidebar-tool-categories {
      margin-top: 20px;
    }

    .sidebar-tool-categories h4 {
      font-size: 0.9rem;
      color: var(--gray);
      text-transform: uppercase;
      letter-spacing: 1px;
      margin-bottom: 15px;
    }

    .sidebar-tools-list {
      list-style: none;
      margin-bottom: 20px;
    }

    .sidebar-tools-list li {
      margin-bottom: 10px;
    }

    .sidebar-tools-list a {
      display: flex;
      align-items: center;
      gap: 10px;
      color: var(--gray);
      text-decoration: none;
      font-size: 0.9rem;
      padding: 8px 10px;
      border-radius: 6px;
      transition: all var(--transition-speed) ease;
    }

    .sidebar-tools-list a:hover {
      color: var(--primary);
      background: var(--light-gray);
    }

    /* Overlay when sidebar is open */
    .sidebar-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.5);
      z-index: 1000;
      opacity: 0;
      visibility: hidden;
      transition: all 0.3s ease;
    }

    .sidebar-overlay.active {
      opacity: 1;
      visibility: visible;
    }

    /* Tool Header - MODIFIED: Reduced top padding to move title higher */
    header {
      background: linear-gradient(135deg, #e6f7ff 0%, #f0f9ff 100%);
      color: #1f2933;
      padding: 80px 20px 40px;
      text-align: center;
      position: relative;
      overflow: hidden;
      margin-top: 75px;
      border-bottom: 1px solid rgba(0, 0, 0, 0.05);
    }

    .dark-theme header {
      background: linear-gradient(135deg, #0a1929 0%, #112240 100%);
      color: #f3f4f6;
      border-bottom: 1px solid rgba(255, 255, 255, 0.05);
    }

    .header-content {
      max-width: 1000px;
      margin: 0 auto;
      position: relative;
      z-index: 2;
    }

    .logo-container {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      margin-bottom: 15px;
      gap: 15px;
    }

    /* Tool-specific header */
    .tool-logo {
      font-size: 4rem;
      margin-bottom: 10px;
      color: var(--primary);
    }

    .tool-header h1 {
      font-size: 3.5rem;
      margin-bottom: 15px;
      color: var(--text-color);
      background: linear-gradient(90deg, #4f46e5, #7c3aed, #10b981);
      -webkit-background-clip: text;
      background-clip: text;
      color: transparent;
      letter-spacing: -0.5px;
      line-height: 1.1;
    }

    .tool-header .tagline {
      font-size: 1.4rem;
      margin-bottom: 1.5rem;
      color: var(--dark);
      max-width: 800px;
      margin-left: auto;
      margin-right: auto;
      line-height: 1.6;
      font-weight: 400;
    }

    .dark-theme .tool-header .tagline {
      color: #e5e7eb;
    }

    /* Main Tool Container */
    .tool-container {
      max-width: 1400px;
      margin: 0 auto;
      padding: 40px 20px;
    }

    /* Tool Card Sections */
    .tool-card-section {
      background: var(--card-bg);
      border-radius: 20px;
      padding: 30px;
      margin-bottom: 30px;
      box-shadow: var(--card-shadow);
      border: 1px solid var(--border-color);
    }

    .tool-card-section h2 {
      font-size: 1.8rem;
      margin-bottom: 20px;
      color: var(--text-color);
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .tool-card-section h2 i {
      color: var(--primary);
    }

    /* Form Grid Layout - Mobile First */
    .form-grid {
      display: grid;
      grid-template-columns: 1fr;
      gap: 25px;
      margin-top: 20px;
    }

    @media (min-width: 768px) {
      .form-grid {
        grid-template-columns: repeat(2, 1fr);
      }
      
      .form-grid.full-width {
        grid-template-columns: 1fr;
      }
    }

    /* Form Groups */
    .form-group {
      margin-bottom: 20px;
    }

    .form-group label {
      display: block;
      margin-bottom: 8px;
      font-weight: 600;
      color: var(--text-color);
      font-size: 1rem;
    }

    .form-group input,
    .form-group select {
      width: 100%;
      padding: 14px 16px;
      border: 2px solid var(--border-color);
      border-radius: 12px;
      font-size: 1rem;
      font-family: 'Inter', sans-serif;
      background: var(--light-gray);
      color: var(--text-color);
      transition: all 0.3s ease;
    }

    .form-group input:focus,
    .form-group select:focus {
      outline: none;
      border-color: var(--primary);
      box-shadow: 0 0 0 3px rgba(79, 70, 229, 0.1);
    }

    .form-group input[type="number"] {
      -moz-appearance: textfield;
    }

    .form-group input[type="number"]::-webkit-outer-spin-button,
    .form-group input[type="number"]::-webkit-inner-spin-button {
      -webkit-appearance: none;
      margin: 0;
    }

    .input-with-icon {
      position: relative;
    }

    .input-with-icon .currency-symbol {
      position: absolute;
      left: 16px;
      top: 50%;
      transform: translateY(-50%);
      font-weight: 600;
      color: var(--primary);
    }

    .input-with-icon input {
      padding-left: 40px;
    }

    .info-tooltip {
      display: inline-block;
      margin-left: 5px;
      color: var(--gray);
      cursor: help;
      position: relative;
    }

    .info-tooltip:hover::after {
      content: attr(data-tooltip);
      position: absolute;
      bottom: 100%;
      left: 50%;
      transform: translateX(-50%);
      background: var(--dark);
      color: white;
      padding: 8px 12px;
      border-radius: 6px;
      font-size: 0.85rem;
      white-space: nowrap;
      z-index: 10;
      margin-bottom: 8px;
    }

    .info-tooltip:hover::before {
      content: '';
      position: absolute;
      bottom: 100%;
      left: 50%;
      transform: translateX(-50%);
      border: 6px solid transparent;
      border-top-color: var(--dark);
      margin-bottom: 2px;
      z-index: 10;
    }

    /* Tax Regime Toggle */
    .tax-regime-toggle {
      display: flex;
      background: var(--light-gray);
      border-radius: 12px;
      padding: 5px;
      margin-bottom: 25px;
      border: 2px solid var(--border-color);
    }

    .regime-option {
      flex: 1;
      padding: 15px 10px;
      text-align: center;
      cursor: pointer;
      border-radius: 8px;
      font-weight: 600;
      transition: all 0.3s ease;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 5px;
    }

    .regime-option:hover {
      background: rgba(79, 70, 229, 0.05);
    }

    .regime-option.active {
      background: var(--primary);
      color: white;
    }

    .regime-option .regime-badge {
      font-size: 0.8rem;
      padding: 3px 8px;
      border-radius: 12px;
      background: rgba(255, 255, 255, 0.2);
    }

    .regime-option.active .regime-badge {
      background: rgba(255, 255, 255, 0.3);
    }

    /* Deductions Section */
    .deductions-grid {
      display: grid;
      grid-template-columns: 1fr;
      gap: 20px;
      margin-top: 20px;
    }

    @media (min-width: 768px) {
      .deductions-grid {
        grid-template-columns: repeat(2, 1fr);
      }
    }

    .deduction-category {
      background: var(--light-gray);
      border-radius: 12px;
      padding: 20px;
      border: 1px solid var(--border-color);
    }

    .deduction-category h3 {
      font-size: 1.1rem;
      margin-bottom: 15px;
      color: var(--text-color);
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .deduction-item {
      margin-bottom: 15px;
    }

    .deduction-item:last-child {
      margin-bottom: 0;
    }

    /* Action Buttons */
    .action-buttons {
      display: grid;
      grid-template-columns: 1fr;
      gap: 15px;
      margin-top: 30px;
    }

    @media (min-width: 768px) {
      .action-buttons {
        grid-template-columns: repeat(3, 1fr);
      }
    }

    .action-btn {
      padding: 16px 20px;
      border: none;
      border-radius: 12px;
      font-size: 1rem;
      font-weight: 600;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 10px;
      transition: all 0.3s ease;
      position: relative;
      overflow: hidden;
      z-index: 1;
    }

    .action-btn::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      opacity: 0;
      transition: opacity 0.4s ease;
      z-index: -1;
    }

    .action-btn:hover {
      transform: translateY(-3px);
    }

    .calculate-btn {
      background: linear-gradient(135deg, var(--primary), var(--primary-dark));
      color: white;
    }

    .calculate-btn::before {
      background: linear-gradient(135deg, var(--primary-dark), #8b5cf6);
    }

    .calculate-btn:hover::before {
      opacity: 1;
    }

    .reset-btn {
      background: linear-gradient(135deg, var(--warning), #d97706);
      color: white;
    }

    .reset-btn::before {
      background: linear-gradient(135deg, #d97706, #b45309);
    }

    .reset-btn:hover::before {
      opacity: 1;
    }

    .save-btn {
      background: linear-gradient(135deg, var(--secondary), #0da67e);
      color: white;
    }

    .save-btn::before {
      background: linear-gradient(135deg, #0da67e, #0b9a74);
    }

    .save-btn:hover::before {
      opacity: 1;
    }

    /* Results Section */
    .results-container {
      display: grid;
      grid-template-columns: 1fr;
      gap: 20px;
      margin-top: 20px;
    }

    @media (min-width: 768px) {
      .results-container {
        grid-template-columns: repeat(2, 1fr);
      }
    }

    @media (min-width: 1024px) {
      .results-container {
        grid-template-columns: repeat(4, 1fr);
      }
    }

    .result-card {
      background: var(--card-bg);
      border-radius: 16px;
      padding: 25px;
      text-align: center;
      box-shadow: var(--card-shadow);
      border: 1px solid var(--border-color);
      transition: all 0.3s ease;
    }

    .result-card:hover {
      transform: translateY(-5px);
      box-shadow: var(--hover-shadow);
    }

    .result-card.highlight {
      background: linear-gradient(135deg, var(--primary), var(--primary-dark));
      color: white;
      border: none;
    }

    .result-card.highlight .result-value {
      color: white;
    }

    .result-card.highlight .result-label {
      color: rgba(255, 255, 255, 0.9);
    }

    .result-icon {
      width: 50px;
      height: 50px;
      margin: 0 auto 15px;
      background: rgba(79, 70, 229, 0.1);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      color: var(--primary);
      font-size: 1.5rem;
    }

    .result-card.highlight .result-icon {
      background: rgba(255, 255, 255, 0.2);
      color: white;
    }

    .result-value {
      font-size: 2rem;
      font-weight: 800;
      margin-bottom: 5px;
      color: var(--text-color);
    }

    .result-label {
      font-size: 0.95rem;
      color: var(--gray);
      margin-bottom: 10px;
    }

    .result-change {
      font-size: 0.85rem;
      padding: 4px 10px;
      border-radius: 20px;
      display: inline-block;
      font-weight: 600;
    }

    .result-change.positive {
      background: rgba(16, 185, 129, 0.1);
      color: var(--success);
    }

    .result-change.negative {
      background: rgba(239, 68, 68, 0.1);
      color: var(--danger);
    }

    /* Tax Breakdown */
    .tax-breakdown {
      margin-top: 30px;
      padding: 25px;
      background: var(--light-gray);
      border-radius: 16px;
      border: 1px solid var(--border-color);
    }

    .tax-breakdown h3 {
      font-size: 1.3rem;
      margin-bottom: 20px;
      color: var(--text-color);
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .breakdown-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 15px 0;
      border-bottom: 1px solid var(--border-color);
    }

    .breakdown-item:last-child {
      border-bottom: none;
    }

    .breakdown-item.total {
      font-weight: 700;
      font-size: 1.1rem;
      color: var(--text-color);
      padding-top: 20px;
      margin-top: 10px;
      border-top: 2px solid var(--primary);
    }

    .breakdown-label {
      color: var(--text-color);
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .breakdown-label i {
      color: var(--primary);
    }

    .breakdown-value {
      font-weight: 600;
      color: var(--text-color);
    }

    .breakdown-value.amount {
      color: var(--primary);
    }

    /* Tax Slabs Table */
    .tax-slabs-container {
      margin-top: 30px;
    }

    .slabs-table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 20px;
      background: var(--card-bg);
      border-radius: 12px;
      overflow: hidden;
      box-shadow: var(--card-shadow);
    }

    .slabs-table th {
      background: var(--primary);
      color: white;
      padding: 15px;
      text-align: left;
      font-weight: 600;
    }

    .slabs-table td {
      padding: 15px;
      border-bottom: 1px solid var(--border-color);
      color: var(--text-color);
    }

    .slabs-table tr:last-child td {
      border-bottom: none;
    }

    .slabs-table tr:hover {
      background: var(--light-gray);
    }

    .slab-highlight {
      background: rgba(79, 70, 229, 0.1) !important;
      font-weight: 600;
    }

    /* Comparison Section */
    .comparison-grid {
      display: grid;
      grid-template-columns: 1fr;
      gap: 25px;
      margin-top: 20px;
    }

    @media (min-width: 768px) {
      .comparison-grid {
        grid-template-columns: repeat(2, 1fr);
      }
    }

    .regime-comparison {
      background: var(--card-bg);
      border-radius: 16px;
      padding: 25px;
      box-shadow: var(--card-shadow);
      border: 1px solid var(--border-color);
      transition: all 0.3s ease;
    }

    .regime-comparison:hover {
      transform: translateY(-5px);
      box-shadow: var(--hover-shadow);
    }

    .regime-comparison.best {
      border: 2px solid var(--success);
      position: relative;
      overflow: hidden;
    }

    .regime-comparison.best::before {
      content: 'RECOMMENDED';
      position: absolute;
      top: 15px;
      right: -30px;
      background: var(--success);
      color: white;
      padding: 5px 35px;
      font-size: 0.8rem;
      font-weight: 600;
      transform: rotate(45deg);
    }

    .regime-header {
      display: flex;
      align-items: center;
      gap: 15px;
      margin-bottom: 20px;
    }

    .regime-icon {
      width: 50px;
      height: 50px;
      background: rgba(79, 70, 229, 0.1);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      color: var(--primary);
      font-size: 1.5rem;
    }

    .regime-comparison.best .regime-icon {
      background: rgba(16, 185, 129, 0.1);
      color: var(--success);
    }

    .regime-title {
      font-size: 1.3rem;
      color: var(--text-color);
    }

    .regime-amount {
      font-size: 2rem;
      font-weight: 800;
      color: var(--text-color);
      margin-bottom: 10px;
    }

    .regime-savings {
      font-size: 0.9rem;
      color: var(--gray);
      margin-bottom: 20px;
    }

    .regime-savings.positive {
      color: var(--success);
      font-weight: 600;
    }

    .regime-savings.negative {
      color: var(--danger);
      font-weight: 600;
    }

    /* NEW: Tutorial Section */
    .tutorial-section {
      background: var(--card-bg);
      padding: 35px 30px;
      border-radius: 16px;
      margin-top: 30px;
      box-shadow: var(--card-shadow);
      border: 1px solid var(--border-color);
    }

    .tutorial-section h2 {
      font-size: 1.8rem;
      margin-bottom: 25px;
      color: var(--text-color);
      display: flex;
      align-items: center;
      gap: 12px;
    }

    .tutorial-section h2 i {
      color: var(--primary);
    }

    .tutorial-steps {
      display: grid;
      grid-template-columns: 1fr;
      gap: 25px;
    }

    @media (min-width: 768px) {
      .tutorial-steps {
        grid-template-columns: repeat(2, 1fr);
      }
    }

    @media (min-width: 1024px) {
      .tutorial-steps {
        grid-template-columns: repeat(4, 1fr);
      }
    }

    .tutorial-step {
      text-align: center;
      padding: 25px 20px;
      background: var(--light-gray);
      border-radius: 12px;
      border: 1px solid var(--border-color);
      transition: all 0.3s ease;
    }

    .tutorial-step:hover {
      transform: translateY(-5px);
      box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
    }

    .step-number {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      width: 40px;
      height: 40px;
      background: linear-gradient(135deg, var(--primary), var(--primary-dark));
      color: white;
      border-radius: 50%;
      font-weight: 700;
      font-size: 1.2rem;
      margin-bottom: 15px;
    }

    .step-content h3 {
      font-size: 1.2rem;
      margin-bottom: 10px;
      color: var(--text-color);
    }

    .step-content p {
      color: var(--gray);
      font-size: 0.95rem;
      line-height: 1.5;
    }

    /* About Section for EEAT */
    .about-section {
      max-width: 800px;
      margin: 40px auto;
      padding: 25px;
      background: var(--card-bg);
      border-radius: 16px;
      box-shadow: var(--card-shadow);
      border-left: 4px solid var(--primary);
    }

    .about-section h2 {
      font-size: 1.5rem;
      margin-bottom: 15px;
      color: var(--text-color);
    }

    .about-section p {
      color: var(--gray);
      line-height: 1.7;
      margin-bottom: 15px;
    }

    /* FAQ Section */
    .faq-section {
      margin-top: 60px;
    }

    .faq-section h2 {
      text-align: center;
      font-size: 2rem;
      margin-bottom: 30px;
      color: var(--text-color);
    }

    .faq-container {
      background: var(--card-bg);
      border-radius: 20px;
      padding: 30px;
      box-shadow: var(--card-shadow);
    }

    .faq-item {
      border-bottom: 1px solid var(--border-color);
      padding: 20px 0;
    }

    .faq-item:last-child {
      border-bottom: none;
    }

    .faq-question {
      display: flex;
      justify-content: space-between;
      align-items: center;
      cursor: pointer;
      color: var(--text-color);
      font-size: 1.1rem;
      font-weight: 600;
    }

    .faq-question i {
      color: var(--primary);
      transition: transform 0.3s ease;
    }

    .faq-item.active .faq-question i {
      transform: rotate(180deg);
    }

    .faq-answer {
      max-height: 0;
      overflow: hidden;
      transition: max-height 0.3s ease;
      color: var(--gray);
      line-height: 1.6;
      padding-right: 40px;
    }

    .faq-item.active .faq-answer {
      max-height: 500px;
      margin-top: 15px;
    }

    /* Related Tools Section */
    .related-tools-section {
      margin: 60px 0 40px;
    }

    .related-tools-section h2 {
      text-align: center;
      font-size: 2rem;
      margin-bottom: 30px;
      color: var(--text-color);
    }

    .related-tools-grid {
      display: grid;
      grid-template-columns: 1fr;
      gap: 25px;
    }

    @media (min-width: 768px) {
      .related-tools-grid {
        grid-template-columns: repeat(2, 1fr);
      }
    }

    @media (min-width: 1024px) {
      .related-tools-grid {
        grid-template-columns: repeat(3, 1fr);
      }
    }

    .related-tool-card {
      background: var(--card-bg);
      padding: 25px;
      border-radius: 16px;
      text-align: center;
      box-shadow: var(--card-shadow);
      transition: all 0.3s ease;
      border: 1px solid var(--border-color);
    }

    .related-tool-card:hover {
      transform: translateY(-5px);
      box-shadow: var(--hover-shadow);
    }

    .related-tool-icon {
      width: 60px;
      height: 60px;
      margin: 0 auto 15px;
      background: linear-gradient(135deg, var(--primary), var(--secondary));
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-size: 1.5rem;
    }

    .related-tool-card h3 {
      font-size: 1.2rem;
      margin-bottom: 10px;
      color: var(--text-color);
    }

    .related-tool-card p {
      color: var(--gray);
      font-size: 0.95rem;
      margin-bottom: 20px;
      line-height: 1.5;
    }

    .related-tool-link {
      display: inline-block;
      padding: 8px 20px;
      background: var(--light-gray);
      color: var(--primary);
      border-radius: 50px;
      font-weight: 600;
      text-decoration: none;
      font-size: 0.9rem;
      transition: all 0.3s ease;
    }

    .related-tool-card:hover .related-tool-link {
      background: var(--primary);
      color: white;
    }

    /* Empty State */
    .empty-state {
      text-align: center;
      padding: 60px 30px;
      color: var(--gray);
      grid-column: 1 / -1;
    }

    .empty-state i {
      font-size: 4rem;
      margin-bottom: 20px;
      color: var(--light-gray);
    }

    .empty-state h3 {
      margin-bottom: 10px;
      font-size: 1.5rem;
      color: var(--text-color);
    }

    /* Loading Spinner */
    .loading {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(255, 255, 255, 0.9);
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      z-index: 10;
      border-radius: 16px;
    }

    .dark-theme .loading {
      background: rgba(26, 35, 50, 0.9);
    }

    .spinner {
      width: 50px;
      height: 50px;
      border: 5px solid #f3f3f3;
      border-top: 5px solid var(--primary);
      border-radius: 50%;
      animation: spin 1s linear infinite;
      margin-bottom: 15px;
    }

    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }

    /* Footer */
    footer {
      background: var(--footer-bg);
      color: #9ca3af;
      padding: 50px 20px 30px;
      margin-top: 60px;
      position: relative;
      transition: background var(--transition-speed) ease;
    }

    footer::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 5px;
      background: linear-gradient(90deg, var(--primary), var(--secondary));
    }

    .footer-content {
      max-width: 1200px;
      margin: 0 auto;
      display: grid;
      grid-template-columns: 1fr;
      gap: 30px;
    }

    @media (min-width: 768px) {
      .footer-content {
        grid-template-columns: repeat(2, 1fr);
      }
    }

    @media (min-width: 1024px) {
      .footer-content {
        grid-template-columns: repeat(4, 1fr);
      }
    }

    .footer-logo {
      font-size: 2rem;
      font-weight: 800;
      color: white;
      margin-bottom: 15px;
      display: inline-block;
      background: linear-gradient(90deg, #fff, #c7d2fe);
      -webkit-background-clip: text;
      background-clip: text;
      color: transparent;
    }

    .footer-description {
      font-size: 0.95rem;
      line-height: 1.7;
      margin-bottom: 20px;
    }

    .social-links {
      display: flex;
      gap: 12px;
      margin-top: 20px;
      flex-wrap: wrap;
    }

    .social-link {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      width: 40px;
      height: 40px;
      background: rgba(255, 255, 255, 0.1);
      border-radius: 50%;
      color: white;
      text-decoration: none;
      transition: all 0.3s ease;
    }

    .social-link:hover {
      background: var(--primary);
      transform: translateY(-5px);
    }

    .footer-links h4 {
      color: white;
      font-size: 1.2rem;
      margin-bottom: 20px;
      position: relative;
      padding-bottom: 10px;
    }

    .footer-links h4::after {
      content: '';
      position: absolute;
      bottom: 0;
      left: 0;
      width: 40px;
      height: 3px;
      background: var(--primary);
    }

    .footer-links ul {
      list-style: none;
    }

    .footer-links li {
      margin-bottom: 10px;
    }

    .footer-links a {
      color: #9ca3af;
      text-decoration: none;
      transition: all 0.3s ease;
      display: inline-block;
      font-size: 0.95rem;
    }

    .footer-links a:hover {
      color: white;
      transform: translateX(5px);
    }

    .footer-bottom {
      text-align: center;
      margin-top: 40px;
      padding-top: 20px;
      border-top: 1px solid rgba(255, 255, 255, 0.1);
      font-size: 0.85rem;
    }

    /* ACCESSIBILITY: Prefers Reduced Motion */
    @media (prefers-reduced-motion: reduce) {
      *,
      *::before,
      *::after {
        animation: none !important;
        transition: none !important;
      }
      
      .action-btn:hover,
      .related-tool-card:hover,
      .result-card:hover,
      .regime-comparison:hover,
      .tutorial-step:hover,
      .social-link:hover,
      .theme-toggle:hover,
      .regime-option:hover {
        transform: none !important;
      }
      
      .tool-header h1,
      .footer-logo {
        background: var(--primary) !important;
        -webkit-background-clip: initial !important;
        background-clip: initial !important;
        color: var(--primary) !important;
      }
    }

    /* Desktop Navigation Styles */
    @media (min-width: 1024px) {
      .nav-links {
        display: flex;
        gap: 30px;
        list-style: none;
      }

      .nav-links a {
        color: var(--text-color);
        text-decoration: none;
        font-weight: 500;
        transition: color var(--transition-speed) ease;
        position: relative;
      }

      .nav-links a:hover {
        color: var(--primary);
      }

      .nav-links a::after {
        content: '';
        position: absolute;
        bottom: -5px;
        left: 0;
        width: 0;
        height: 2px;
        background: var(--primary);
        transition: width 0.3s;
      }

      .nav-links a:hover::after {
        width: 100%;
      }

      .mobile-menu-btn {
        display: none;
      }

      .sidebar {
        display: none;
      }

      .sidebar-overlay {
        display: none;
      }
    }

    /* Mobile Responsive */
    @media (max-width: 768px) {
      header {
        padding: 60px 20px 30px;
        margin-top: 70px;
      }
      
      .tool-header h1 {
        font-size: 2.8rem;
      }
      
      .tool-header .tagline {
        font-size: 1.2rem;
      }
      
      .tool-card-section {
        padding: 20px;
      }
      
      .tax-regime-toggle {
        flex-direction: column;
      }
      
      .regime-option {
        padding: 12px 10px;
      }
      
      .slabs-table {
        display: block;
        overflow-x: auto;
      }
      
      .slabs-table th,
      .slabs-table td {
        padding: 10px;
        font-size: 0.9rem;
      }
      
      .regime-comparison.best::before {
        font-size: 0.7rem;
        padding: 4px 25px;
        right: -25px;
        top: 12px;
      }
      
      .tutorial-section {
        padding: 25px 20px;
      }
      
      .tutorial-step {
        padding: 20px 15px;
      }
      
      .faq-container {
        padding: 20px;
      }
      
      .faq-answer {
        padding-right: 20px;
      }
    }

    /* Large Desktop Styles */
    @media (min-width: 1200px) {
      .tool-container {
        padding: 60px 20px;
      }
      
      .tool-header h1 {
        font-size: 4rem;
      }
    }

    /* Print Styles */
    @media print {
      .navbar, .sidebar, .sidebar-overlay, .mobile-menu-btn,
      .action-btn, .related-tool-link, .social-links,
      .footer-bottom, .theme-toggle, .tutorial-section,
      .related-tools-section {
        display: none !important;
      }
      
      body {
        background: white;
        color: black;
      }
      
      .tool-container {
        padding: 20px;
      }
      
      .tool-card-section {
        box-shadow: none;
        border: 1px solid #ddd;
        margin-bottom: 20px;
        break-inside: avoid;
      }
      
      .result-card {
        box-shadow: none;
        border: 1px solid #ddd;
      }
      
      header {
        background: white !important;
        color: black;
        padding: 20px;
        margin-top: 0;
      }
      
      .tool-header h1 {
        background: black !important;
        -webkit-background-clip: initial !important;
        background-clip: initial !important;
        color: black;
      }
      
      footer {
        background: #f5f5f5 !important;
        color: #666;
      }
    }
  </style>
</head>

<body>
  <!-- Navigation -->
  <nav class="navbar">
    <div class="nav-container">
      <!-- UPDATED: Brand name changed -->
      <a href="index.html" class="nav-logo">
        <i class="fas fa-tools"></i> Toolsedito
      </a>
      
      <!-- Desktop Navigation -->
      <ul class="nav-links">
        <li><a href="index.html">Home</a></li>
        <li><a href="index.html#tools">Tools</a></li>
        <li><a href="index.html#calculators">Calculators</a></li>
        <li><a href="#faq">FAQ</a></li>
        <li><a href="#privacy">Privacy</a></li>
        <li><a href="#about">About</a></li>
      </ul>
      
      <div style="display: flex; align-items: center;">
        <!-- Theme Toggle Button -->
        <button class="theme-toggle" id="themeToggle" aria-label="Toggle dark mode">
          <i class="fas fa-moon"></i>
          <i class="fas fa-sun"></i>
        </button>
        
        <!-- Mobile Menu Button -->
        <button class="mobile-menu-btn" id="mobileMenuBtn">
          <i class="fas fa-bars"></i>
        </button>
      </div>
    </div>
  </nav>

  <!-- Mobile Sidebar -->
  <div class="sidebar-overlay" id="sidebarOverlay"></div>
  <div class="sidebar" id="sidebar">
    <div class="sidebar-header">
      <!-- UPDATED: Brand name changed -->
      <a href="index.html" class="nav-logo">
        <i class="fas fa-tools"></i> Toolsedito
      </a>
      <button class="sidebar-close" id="sidebarClose">
        <i class="fas fa-times"></i>
      </button>
    </div>
    
    <ul class="sidebar-links">
      <li><a href="index.html"><i class="fas fa-home"></i> Home</a></li>
      <li><a href="index.html#tools"><i class="fas fa-tools"></i> All Tools</a></li>
      <li><a href="index.html#calculators"><i class="fas fa-calculator"></i> Calculators</a></li>
      <li><a href="#faq"><i class="fas fa-question-circle"></i> FAQ</a></li>
      <li><a href="#privacy"><i class="fas fa-shield-alt"></i> Privacy</a></li>
      <li>
        <a href="#" id="sidebarThemeToggle">
          <i class="fas fa-moon"></i> Dark Mode
          <span id="themeStatus" style="margin-left: auto; font-size: 0.8rem; opacity: 0.7;">OFF</span>
        </a>
      </li>
    </ul>
    
    <div class="sidebar-divider"></div>
    
    <div class="sidebar-tool-categories">
      <h4>Quick Calculators</h4>
      <ul class="sidebar-tools-list">
        <li><a href="gst-calculator.html"><i class="fas fa-rupee-sign"></i> GST Calculator</a></li>
        <li><a href="tax-calculator.html" class="active"><i class="fas fa-calculator"></i> Tax Calculator</a></li>
        <li><a href="emi-calculator.html"><i class="fas fa-home"></i> EMI Calculator</a></li>
        <li><a href="investment-calculator.html"><i class="fas fa-chart-line"></i> Investment Calculator</a></li>
        <li><a href="age-calculator.html"><i class="fas fa-birthday-cake"></i> Age Calculator</a></li>
      </ul>
    </div>
  </div>

  <!-- Tool Header -->
  <header>
    <div class="header-content">
      <div class="tool-header">
        <div class="logo-container">
          <div class="tool-logo">
            <i class="fas fa-calculator"></i>
          </div>
        </div>
        
        <h1>Tax Calculator</h1>
        <p class="tagline">Calculate your income tax liability for FY 2026-27. Compare Old vs New tax regimes with deductions and rebates.</p>
      </div>
    </div>
  </header>

  <!-- Main Tool Container -->
  <div class="tool-container">
    <!-- Tax Regime Selection -->
    <div class="tool-card-section">
      <h2><i class="fas fa-balance-scale"></i> Select Tax Regime</h2>
      <p style="color: var(--gray); margin-bottom: 20px;">Choose between the Old Tax Regime (with deductions) and New Tax Regime (lower tax rates, limited deductions).</p>
      
      <div class="tax-regime-toggle" id="taxRegimeToggle">
        <div class="regime-option active" data-regime="new">
          <i class="fas fa-bolt"></i>
          <span>New Tax Regime</span>
          <span class="regime-badge">Default</span>
        </div>
        <div class="regime-option" data-regime="old">
          <i class="fas fa-file-invoice-dollar"></i>
          <span>Old Tax Regime</span>
          <span class="regime-badge">With Deductions</span>
        </div>
      </div>
    </div>

    <!-- Income Details Section -->
    <div class="tool-card-section">
      <h2><i class="fas fa-money-bill-wave"></i> Income Details</h2>
      
      <div class="form-grid">
        <div class="form-group">
          <label for="annualIncome">
            Annual Income 
            <span class="info-tooltip" data-tooltip="Total income before any deductions for FY 2026-27">ℹ️</span>
          </label>
          <div class="input-with-icon">
            <span class="currency-symbol">₹</span>
            <input type="number" id="annualIncome" placeholder="Enter annual income" value="1200000" min="0" step="10000">
          </div>
        </div>
        
        <div class="form-group">
          <label for="ageGroup">Age Group</label>
          <select id="ageGroup">
            <option value="below60">Below 60 years</option>
            <option value="60to80">60 to 80 years</option>
            <option value="above80">Above 80 years</option>
          </select>
        </div>
      </div>
    </div>

    <!-- Deductions Section (Visible only for Old Regime) -->
    <div class="tool-card-section" id="deductionsSection">
      <h2><i class="fas fa-percentage"></i> Deductions & Exemptions</h2>
      <p style="color: var(--gray); margin-bottom: 20px;">Applicable for Old Tax Regime only. New regime has limited deductions.</p>
      
      <div class="deductions-grid">
        <div class="deduction-category">
          <h3><i class="fas fa-home"></i> Section 80C</h3>
          <div class="deduction-item">
            <label for="section80C">Investments (PPF, ELSS, Life Insurance, etc.)</label>
            <div class="input-with-icon">
              <span class="currency-symbol">₹</span>
              <input type="number" id="section80C" placeholder="Max ₹1,50,000" value="150000" min="0" max="150000" step="1000">
            </div>
          </div>
        </div>
        
        <div class="deduction-category">
          <h3><i class="fas fa-heartbeat"></i> Medical & Health</h3>
          <div class="deduction-item">
            <label for="section80D">Health Insurance Premium</label>
            <div class="input-with-icon">
              <span class="currency-symbol">₹</span>
              <input type="number" id="section80D" placeholder="Max ₹50,000" value="25000" min="0" max="50000" step="1000">
            </div>
          </div>
        </div>
        
        <div class="deduction-category">
          <h3><i class="fas fa-graduation-cap"></i> Education Loan</h3>
          <div class="deduction-item">
            <label for="section80E">Education Loan Interest</label>
            <div class="input-with-icon">
              <span class="currency-symbol">₹</span>
              <input type="number" id="section80E" placeholder="Enter amount" value="0" min="0" step="1000">
            </div>
          </div>
        </div>
        
        <div class="deduction-category">
          <h3><i class="fas fa-hand-holding-usd"></i> Other Deductions</h3>
          <div class="deduction-item">
            <label for="hra">HRA Exemption</label>
            <div class="input-with-icon">
              <span class="currency-symbol">₹</span>
              <input type="number" id="hra" placeholder="Enter HRA amount" value="60000" min="0" step="1000">
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Action Buttons -->
    <div class="tool-card-section">
      <div class="action-buttons">
        <button class="action-btn calculate-btn" id="calculateBtn">
          <i class="fas fa-calculator"></i> Calculate Tax
        </button>
        <button class="action-btn reset-btn" id="resetBtn">
          <i class="fas fa-redo"></i> Reset All
        </button>
        <button class="action-btn save-btn" id="saveBtn">
          <i class="fas fa-download"></i> Save Results
        </button>
      </div>
    </div>

    <!-- Results Section -->
    <div class="tool-card-section" id="resultsSection" style="display: none;">
      <h2><i class="fas fa-chart-pie"></i> Tax Calculation Results</h2>
      
      <div class="results-container">
        <div class="result-card">
          <div class="result-icon">
            <i class="fas fa-money-bill-wave"></i>
          </div>
          <div class="result-value" id="totalTax">₹0</div>
          <div class="result-label">Total Tax Liability</div>
        </div>
        
        <div class="result-card highlight">
          <div class="result-icon">
            <i class="fas fa-hand-holding-usd"></i>
          </div>
          <div class="result-value" id="netIncome">₹0</div>
          <div class="result-label">Net Income (After Tax)</div>
          <div class="result-change" id="netIncomeChange">0% of income</div>
        </div>
        
        <div class="result-card">
          <div class="result-icon">
            <i class="fas fa-percentage"></i>
          </div>
          <div class="result-value" id="effectiveTaxRate">0%</div>
          <div class="result-label">Effective Tax Rate</div>
          <div class="result-change" id="taxRateChange">vs 0%</div>
        </div>
        
        <div class="result-card">
          <div class="result-icon">
            <i class="fas fa-piggy-bank"></i>
          </div>
          <div class="result-value" id="totalDeductions">₹0</div>
          <div class="result-label">Total Deductions</div>
        </div>
      </div>

      <!-- Tax Breakdown -->
      <div class="tax-breakdown">
        <h3><i class="fas fa-receipt"></i> Tax Breakdown</h3>
        <div class="breakdown-item">
          <div class="breakdown-label">
            <i class="fas fa-chart-line"></i>
            Taxable Income
          </div>
          <div class="breakdown-value amount" id="taxableIncome">₹0</div>
        </div>
        <div class="breakdown-item">
          <div class="breakdown-label">
            <i class="fas fa-file-invoice-dollar"></i>
            Income Tax
          </div>
          <div class="breakdown-value amount" id="incomeTax">₹0</div>
        </div>
        <div class="breakdown-item">
          <div class="breakdown-label">
            <i class="fas fa-plus-circle"></i>
            Surcharge
          </div>
          <div class="breakdown-value amount" id="surcharge">₹0</div>
        </div>
        <div class="breakdown-item">
          <div class="breakdown-label">
            <i class="fas fa-plus-circle"></i>
            Cess (4%)
          </div>
          <div class="breakdown-value amount" id="cess">₹0</div>
        </div>
        <div class="breakdown-item total">
          <div class="breakdown-label">
            <i class="fas fa-file-invoice"></i>
            Total Tax Payable
          </div>
          <div class="breakdown-value amount" id="totalPayable">₹0</div>
        </div>
      </div>
    </div>

    <!-- Tax Slabs Section -->
    <div class="tool-card-section">
      <h2><i class="fas fa-layer-group"></i> Current Tax Slabs (FY 2026-27)</h2>
      
      <div class="tax-slabs-container">
        <div class="tax-regime-toggle" style="margin-bottom: 20px;">
          <div class="regime-option active" data-slabs="new">
            <i class="fas fa-bolt"></i>
            <span>New Regime Slabs</span>
          </div>
          <div class="regime-option" data-slabs="old">
            <i class="fas fa-file-invoice-dollar"></i>
            <span>Old Regime Slabs</span>
          </div>
        </div>
        
        <table class="slabs-table" id="newRegimeSlabs">
          <thead>
            <tr>
              <th>Income Slab (₹)</th>
              <th>Tax Rate</th>
              <th>Tax Amount</th>
            </tr>
          </thead>
          <tbody id="newRegimeSlabsBody">
            <!-- Filled by JavaScript -->
          </tbody>
        </table>
        
        <table class="slabs-table" id="oldRegimeSlabs" style="display: none;">
          <thead>
            <tr>
              <th>Income Slab (₹)</th>
              <th>Tax Rate</th>
              <th>Tax Amount</th>
            </tr>
          </thead>
          <tbody id="oldRegimeSlabsBody">
            <!-- Filled by JavaScript -->
          </tbody>
        </table>
      </div>
    </div>

    <!-- Regime Comparison Section -->
    <div class="tool-card-section" id="comparisonSection" style="display: none;">
      <h2><i class="fas fa-balance-scale-right"></i> Regime Comparison</h2>
      <p style="color: var(--gray); margin-bottom: 20px;">Compare tax liability under both regimes to choose the best option for you.</p>
      
      <div class="comparison-grid">
        <div class="regime-comparison" id="newRegimeComparison">
          <div class="regime-header">
            <div class="regime-icon">
              <i class="fas fa-bolt"></i>
            </div>
            <div>
              <div class="regime-title">New Tax Regime</div>
              <div class="regime-savings" id="newRegimeSavings">Lower tax rates</div>
            </div>
          </div>
          <div class="regime-amount" id="newRegimeTax">₹0</div>
          <div class="breakdown-item">
            <div class="breakdown-label">Standard Deduction</div>
            <div class="breakdown-value">₹75,000</div>
          </div>
          <div class="breakdown-item">
            <div class="breakdown-label">Other Deductions</div>
            <div class="breakdown-value">Limited</div>
          </div>
        </div>
        
        <div class="regime-comparison" id="oldRegimeComparison">
          <div class="regime-header">
            <div class="regime-icon">
              <i class="fas fa-file-invoice-dollar"></i>
            </div>
            <div>
              <div class="regime-title">Old Tax Regime</div>
              <div class="regime-savings" id="oldRegimeSavings">With deductions</div>
            </div>
          </div>
          <div class="regime-amount" id="oldRegimeTax">₹0</div>
          <div class="breakdown-item">
            <div class="breakdown-label">Standard Deduction</div>
            <div class="breakdown-value">₹50,000</div>
          </div>
          <div class="breakdown-item">
            <div class="breakdown-label">Section 80C</div>
            <div class="breakdown-value">₹1,50,000</div>
          </div>
        </div>
      </div>
      
      <div style="margin-top: 25px; padding: 20px; background: rgba(16, 185, 129, 0.1); border-radius: 12px; border: 1px solid rgba(16, 185, 129, 0.3);">
        <h3 style="font-size: 1.1rem; margin-bottom: 10px; color: var(--success);">
          <i class="fas fa-lightbulb"></i> Recommendation
        </h3>
        <p style="color: var(--text-color); font-size: 0.95rem;" id="recommendationText">
          Based on your income and deductions, the <strong>New Tax Regime</strong> appears to be better for you as it results in lower tax liability.
        </p>
      </div>
    </div>

    <!-- NEW: How to Use Tax Calculator Tutorial Section -->
    <div class="tutorial-section" id="tutorialSection">
      <h2><i class="fas fa-graduation-cap"></i> How to Calculate Your Tax</h2>
      <div class="tutorial-steps">
        <div class="tutorial-step">
          <div class="step-number">1</div>
          <div class="step-content">
            <h3>Enter Your Income</h3>
            <p>Start by entering your annual income for the financial year 2026-27. This is your total income before any deductions.</p>
          </div>
        </div>
        
        <div class="tutorial-step">
          <div class="step-number">2</div>
          <div class="step-content">
            <h3>Choose Tax Regime</h3>
            <p>Select between Old Regime (with deductions) or New Regime (lower rates). The calculator will show comparisons.</p>
          </div>
        </div>
        
        <div class="tutorial-step">
          <div class="step-number">3</div>
          <div class="step-content">
            <h3>Add Deductions</h3>
            <p>For Old Regime, enter your investments and deductions under various sections like 80C, 80D, HRA, etc.</p>
          </div>
        </div>
        
        <div class="tutorial-step">
          <div class="step-number">4</div>
          <div class="step-content">
            <h3>Calculate & Compare</h3>
            <p>Click Calculate to see your tax liability, effective tax rate, and comparison between both tax regimes.</p>
          </div>
        </div>
      </div>
    </div>

    <!-- EEAT About Section -->
    <div class="about-section" id="about">
      <h2>About This Tax Calculator Tool</h2>
      <p>Our Tax Calculator is developed by finance professionals with expertise in Indian taxation laws. We stay updated with the latest budget changes and tax regulations to provide accurate calculations for FY 2026-27.</p>
      <p>This tool helps individuals, salaried professionals, freelancers, and small business owners plan their taxes effectively. Unlike other tax calculators:</p>
      <ul style="margin-left: 20px; margin-bottom: 15px; color: var(--gray);">
        <li>Calculates both Old and New tax regimes simultaneously</li>
        <li>Includes all major deductions and exemptions</li>
        <li>Provides regime comparison with recommendations</li>
        <li>Shows detailed tax slab-wise breakdown</li>
        <li>100% free with no registration required</li>
      </ul>
      <p>The calculator uses the latest tax slabs and rates as per the Union Budget 2026. It considers standard deduction, surcharge, health cess, and all applicable deductions to give you the most accurate tax liability estimate.</p>
      <p style="font-style: italic; color: var(--gray); margin-top: 15px; padding: 10px; border-left: 3px solid var(--primary);">
        <strong>Disclaimer:</strong> This calculator provides estimates for informational purposes only. Actual tax liability may vary based on specific circumstances. Please consult a tax professional for official tax filing.
      </p>
    </div>

    <!-- FAQ Section -->
    <div class="faq-section" id="faq">
      <h2>Frequently Asked Questions</h2>
      <div class="faq-container">
        <div class="faq-item">
          <div class="faq-question">
            <span>Which tax regime should I choose - Old or New?</span>
            <i class="fas fa-chevron-down"></i>
          </div>
          <div class="faq-answer">
            <p>It depends on your income level and available deductions. Generally, if your total deductions exceed ₹2.5 lakhs, the Old Regime might be beneficial. For those with fewer deductions, the New Regime with lower tax rates is usually better. Our calculator compares both and recommends the optimal choice.</p>
          </div>
        </div>
        
        <div class="faq-item">
          <div class="faq-question">
            <span>What deductions are available in the New Tax Regime?</span>
            <i class="fas fa-chevron-down"></i>
          </div>
          <div class="faq-answer">
            <p>The New Tax Regime offers limited deductions: Standard Deduction of ₹75,000 for salaried individuals, deductions for employer's NPS contribution, and some specific allowances. Most other deductions under sections like 80C, 80D, 80E, HRA, etc., are not available in the New Regime.</p>
          </div>
        </div>
        
        <div class="faq-item">
          <div class="faq-question">
            <span>How is surcharge calculated on income tax?</span>
            <i class="fas fa-chevron-down"></i>
          </div>
          <div class="faq-answer">
            <p>Surcharge is applicable if your total income exceeds certain thresholds: 10% for income above ₹50 lakh, 15% above ₹1 crore, 25% above ₹2 crore, and 37% above ₹5 crore. This is calculated on the basic income tax amount before adding health and education cess.</p>
          </div>
        </div>
        
        <div class="faq-item">
          <div class="faq-question">
            <span>What is the difference between tax exemption and deduction?</span>
            <i class="fas fa-chevron-down"></i>
          </div>
          <div class="faq-answer">
            <p>Exemptions reduce your gross income (like HRA, LTA) while deductions reduce your taxable income (like 80C, 80D). Exemptions are available for specific income components, while deductions are for specific investments or expenses. Both ultimately reduce your tax liability but work differently in calculation.</p>
          </div>
        </div>
        
        <div class="faq-item">
          <div class="faq-question">
            <span>Can I switch between tax regimes every year?</span>
            <i class="fas fa-chevron-down"></i>
          </div>
          <div class="faq-answer">
            <p>Yes, salaried individuals can choose their tax regime each financial year. However, business professionals and those with business income need to maintain consistency once chosen. It's advisable to calculate both options annually as your income and deductions may change.</p>
          </div>
        </div>
        
        <div class="faq-item">
          <div class="faq-question">
            <span>Is the standard deduction available in both tax regimes?</span>
            <i class="fas fa-chevron-down"></i>
          </div>
          <div class="faq-answer">
            <p>Yes, but at different rates: ₹75,000 in New Regime and ₹50,000 in Old Regime for salaried individuals. This deduction is automatically applied to your salary income before calculating taxable income, reducing your tax liability directly.</p>
          </div>
        </div>
      </div>
    </div>

    <!-- Related Tools Section -->
    <div class="related-tools-section">
      <h2>Other Useful Calculators</h2>
      <div class="related-tools-grid">
        <div class="related-tool-card">
          <div class="related-tool-icon">
            <i class="fas fa-rupee-sign"></i>
          </div>
          <h3>GST Calculator</h3>
          <p>Calculate Goods and Services Tax for your invoices and purchases with different GST slabs and rates.</p>
          <a href="gst-calculator.html" class="related-tool-link">Use Tool</a>
        </div>
        
        <div class="related-tool-card">
          <div class="related-tool-icon">
            <i class="fas fa-home"></i>
          </div>
          <h3>EMI Calculator</h3>
          <p>Calculate Equated Monthly Installments for home loans, car loans, and personal loans with interest rates.</p>
          <a href="emi-calculator.html" class="related-tool-link">Use Tool</a>
        </div>
        
        <div class="related-tool-card">
          <div class="related-tool-icon">
            <i class="fas fa-chart-line"></i>
          </div>
          <h3>Investment Calculator</h3>
          <p>Calculate returns on investments with compound interest. Plan your financial future effectively.</p>
          <a href="investment-calculator.html" class="related-tool-link">Use Tool</a>
        </div>
        
        <div class="related-tool-card">
          <div class="related-tool-icon">
            <i class="fas fa-birthday-cake"></i>
          </div>
          <h3>Age Calculator</h3>
          <p>Calculate exact age in years, months, and days from birth date. Countdown to next birthday.</p>
          <a href="age-calculator.html" class="related-tool-link">Use Tool</a>
        </div>
        
        <div class="related-tool-card">
          <div class="related-tool-icon">
            <i class="fas fa-exchange-alt"></i>
          </div>
          <h3>Currency Converter</h3>
          <p>Convert between different currencies with real-time exchange rates and historical data.</p>
          <a href="currency-converter.html" class="related-tool-link">Use Tool</a>
        </div>
        
        <div class="related-tool-card">
          <div class="related-tool-icon">
            <i class="fas fa-percentage"></i>
          </div>
          <h3>Discount Calculator</h3>
          <p>Calculate discounts, sale prices, and percentage off for shopping and retail calculations.</p>
          <a href="discount-calculator.html" class="related-tool-link">Use Tool</a>
        </div>
      </div>
    </div>
  </div>

  <!-- Footer -->
  <footer id="privacy">
    <div class="footer-content">
      <div class="footer-about">
        <h3 class="footer-logo">Toolsedito</h3>
        <p class="footer-description">Toolsedito provides smart online tools for everyday productivity. Our Tax Calculator is 100% free, accurate, and updated for FY 2026-27 tax laws.</p>
        <div class="social-links">
          <a href="#" class="social-link"><i class="fab fa-twitter"></i></a>
          <a href="#" class="social-link"><i class="fab fa-facebook-f"></i></a>
          <a href="#" class="social-link"><i class="fab fa-instagram"></i></a>
          <a href="#" class="social-link"><i class="fab fa-linkedin-in"></i></a>
          <a href="#" class="social-link"><i class="fab fa-github"></i></a>
        </div>
      </div>
      
      <div class="footer-links">
        <h4>Quick Links</h4>
        <ul>
          <li><a href="index.html">Home</a></li>
          <li><a href="index.html#tools">All Tools</a></li>
          <li><a href="index.html#calculators">Calculators</a></li>
          <li><a href="#faq">FAQ</a></li>
          <li><a href="#about">About This Tool</a></li>
        </ul>
      </div>
      
      <div class="footer-links">
        <h4>Finance Tools</h4>
        <ul>
          <li><a href="gst-calculator.html">GST Calculator</a></li>
          <li><a href="tax-calculator.html">Tax Calculator</a></li>
          <li><a href="emi-calculator.html">EMI Calculator</a></li>
          <li><a href="investment-calculator.html">Investment Calculator</a></li>
          <li><a href="compound-interest.html">Compound Interest</a></li>
        </ul>
      </div>
      
      <div class="footer-links">
        <h4>Legal</h4>
        <ul>
          <li><a href="privacy-policy.html">Privacy Policy</a></li>
          <li><a href="terms-of-service.html">Terms of Service</a></li>
          <li><a href="disclaimer.html">Disclaimer</a></li>
          <li><a href="cookie-policy.html">Cookie Policy</a></li>
        </ul>
      </div>
    </div>
    
    <div class="footer-bottom">
      <p>&copy; 2026 Toolsedito. All rights reserved. | Tax Calculator v2.1 | Updated for FY 2026-27 tax laws | Calculations are estimates only.</p>
      <p style="margin-top: 10px; color: #9ca3af;">Made with <i class="fas fa-heart" style="color: #ef4444;"></i> for financial planning and tax savings</p>
    </div>
  </footer>

  <script>
    // Dark Theme Toggle
    const themeToggle = document.getElementById('themeToggle');
    const sidebarThemeToggle = document.getElementById('sidebarThemeToggle');
    const themeStatus = document.getElementById('themeStatus');
    const body = document.body;
    
    // Check for saved theme preference or prefer-color-scheme
    const prefersDarkScheme = window.matchMedia('(prefers-color-scheme: dark)');
    const savedTheme = localStorage.getItem('theme');
    
    // Set initial theme
    if (savedTheme === 'dark' || (!savedTheme && prefersDarkScheme.matches)) {
      body.classList.add('dark-theme');
      updateThemeStatus(true);
    } else {
      updateThemeStatus(false);
    }
    
    // Main theme toggle function
    function toggleTheme() {
      const isDark = body.classList.toggle('dark-theme');
      localStorage.setItem('theme', isDark ? 'dark' : 'light');
      updateThemeStatus(isDark);
      
      // Add animation to the toggle button
      themeToggle.style.transform = 'rotate(360deg)';
      setTimeout(() => {
        themeToggle.style.transform = '';
      }, 300);
    }
    
    // Update theme status text and icon
    function updateThemeStatus(isDark) {
      if (themeStatus) {
        themeStatus.textContent = isDark ? 'ON' : 'OFF';
      }
    }
    
    // Event listeners for theme toggles
    themeToggle.addEventListener('click', toggleTheme);
    
    if (sidebarThemeToggle) {
      sidebarThemeToggle.addEventListener('click', function(e) {
        e.preventDefault();
        toggleTheme();
      });
    }
    
    // Mobile Sidebar Functionality
    const mobileMenuBtn = document.getElementById('mobileMenuBtn');
    const sidebar = document.getElementById('sidebar');
    const sidebarClose = document.getElementById('sidebarClose');
    const sidebarOverlay = document.getElementById('sidebarOverlay');
    
    // Open sidebar
    mobileMenuBtn.addEventListener('click', () => {
      sidebar.classList.add('active');
      sidebarOverlay.classList.add('active');
      document.body.style.overflow = 'hidden';
    });
    
    // Close sidebar
    function closeSidebar() {
      sidebar.classList.remove('active');
      sidebarOverlay.classList.remove('active');
      document.body.style.overflow = 'auto';
    }
    
    sidebarClose.addEventListener('click', closeSidebar);
    sidebarOverlay.addEventListener('click', closeSidebar);
    
    // Close sidebar when clicking on a link (for mobile)
    document.querySelectorAll('.sidebar-links a').forEach(link => {
      link.addEventListener('click', function(e) {
        if (!this.id.includes('Theme')) { // Don't close for theme toggle
          closeSidebar();
        }
      });
    });
    
    // Add smooth scrolling to all links
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
      anchor.addEventListener('click', function(e) {
        e.preventDefault();
        
        const targetId = this.getAttribute('href');
        if(targetId === '#') return;
        
        const targetElement = document.querySelector(targetId);
        if(targetElement) {
          window.scrollTo({
            top: targetElement.offsetTop - 80,
            behavior: 'smooth'
          });
          
          // Close sidebar on mobile after clicking
          if (window.innerWidth < 1024) {
            closeSidebar();
          }
        }
      });
    });

    // Tax Calculator JavaScript
    // DOM Elements
    const taxRegimeToggle = document.getElementById('taxRegimeToggle');
    const deductionsSection = document.getElementById('deductionsSection');
    const calculateBtn = document.getElementById('calculateBtn');
    const resetBtn = document.getElementById('resetBtn');
    const saveBtn = document.getElementById('saveBtn');
    const resultsSection = document.getElementById('resultsSection');
    const comparisonSection = document.getElementById('comparisonSection');
    
    // Input elements
    const annualIncomeInput = document.getElementById('annualIncome');
    const ageGroupSelect = document.getElementById('ageGroup');
    const section80CInput = document.getElementById('section80C');
    const section80DInput = document.getElementById('section80D');
    const section80EInput = document.getElementById('section80E');
    const hraInput = document.getElementById('hra');
    
    // Result elements
    const totalTaxEl = document.getElementById('totalTax');
    const netIncomeEl = document.getElementById('netIncome');
    const netIncomeChangeEl = document.getElementById('netIncomeChange');
    const effectiveTaxRateEl = document.getElementById('effectiveTaxRate');
    const taxRateChangeEl = document.getElementById('taxRateChange');
    const totalDeductionsEl = document.getElementById('totalDeductions');
    const taxableIncomeEl = document.getElementById('taxableIncome');
    const incomeTaxEl = document.getElementById('incomeTax');
    const surchargeEl = document.getElementById('surcharge');
    const cessEl = document.getElementById('cess');
    const totalPayableEl = document.getElementById('totalPayable');
    
    // Comparison elements
    const newRegimeTaxEl = document.getElementById('newRegimeTax');
    const oldRegimeTaxEl = document.getElementById('oldRegimeTax');
    const newRegimeSavingsEl = document.getElementById('newRegimeSavings');
    const oldRegimeSavingsEl = document.getElementById('oldRegimeSavings');
    const recommendationTextEl = document.getElementById('recommendationText');
    
    // Tax slab elements
    const slabToggle = document.querySelector('.tax-slabs-container .tax-regime-toggle');
    const newRegimeSlabs = document.getElementById('newRegimeSlabs');
    const oldRegimeSlabs = document.getElementById('oldRegimeSlabs');
    const newRegimeSlabsBody = document.getElementById('newRegimeSlabsBody');
    const oldRegimeSlabsBody = document.getElementById('oldRegimeSlabsBody');
    
    // Current state
    let currentRegime = 'new';
    let calculationResults = null;
    
    // Helper function to format numbers with commas
    function formatNumber(num) {
      if (num === undefined || num === null || isNaN(num)) return '0';
      return Math.round(num).toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");
    }
    
    // Initialize tax slabs display
    initializeTaxSlabs();
    
    // Event Listeners
    taxRegimeToggle.addEventListener('click', (e) => {
      const regimeOption = e.target.closest('.regime-option');
      if (!regimeOption) return;
      
      // Update active state
      document.querySelectorAll('.tax-regime-toggle .regime-option').forEach(opt => {
        opt.classList.remove('active');
      });
      regimeOption.classList.add('active');
      
      // Update current regime
      currentRegime = regimeOption.getAttribute('data-regime');
      
      // Show/hide deductions section
      if (currentRegime === 'old') {
        deductionsSection.style.display = 'block';
      } else {
        deductionsSection.style.display = 'none';
      }
      
      // If we have previous results, recalculate
      if (calculationResults) {
        calculateTax();
      }
    });
    
    slabToggle.addEventListener('click', (e) => {
      const regimeOption = e.target.closest('.regime-option');
      if (!regimeOption) return;
      
      // Update active state
      document.querySelectorAll('.tax-slabs-container .regime-option').forEach(opt => {
        opt.classList.remove('active');
      });
      regimeOption.classList.add('active');
      
      // Show selected slabs table
      const slabsType = regimeOption.getAttribute('data-slabs');
      if (slabsType === 'new') {
        newRegimeSlabs.style.display = 'table';
        oldRegimeSlabs.style.display = 'none';
      } else {
        newRegimeSlabs.style.display = 'none';
        oldRegimeSlabs.style.display = 'table';
      }
    });
    
    calculateBtn.addEventListener('click', calculateTax);
    
    resetBtn.addEventListener('click', () => {
      // Reset all inputs to default values
      annualIncomeInput.value = 1200000;
      ageGroupSelect.value = 'below60';
      section80CInput.value = 150000;
      section80DInput.value = 25000;
      section80EInput.value = 0;
      hraInput.value = 60000;
      
      // Reset regime to new
      document.querySelectorAll('.tax-regime-toggle .regime-option').forEach(opt => {
        opt.classList.remove('active');
      });
      document.querySelector('.tax-regime-toggle .regime-option[data-regime="new"]').classList.add('active');
      currentRegime = 'new';
      deductionsSection.style.display = 'none';
      
      // Hide results
      resultsSection.style.display = 'none';
      comparisonSection.style.display = 'none';
      
      // Reset calculation
      calculationResults = null;
      
      // Show confirmation
      showNotification('All fields have been reset to default values.', 'success');
    });
    
    saveBtn.addEventListener('click', saveResults);
    
    // FAQ functionality
    document.querySelectorAll('.faq-question').forEach(question => {
      question.addEventListener('click', () => {
        const item = question.parentElement;
        item.classList.toggle('active');
      });
    });
    
    // Functions
    function initializeTaxSlabs() {
      // Initialize New Regime slabs
      newRegimeSlabsBody.innerHTML = '';
      const newSlabs = [
        { min: 0, max: 300000, rate: 0 },
        { min: 300000, max: 600000, rate: 0.05 },
        { min: 600000, max: 900000, rate: 0.10 },
        { min: 900000, max: 1200000, rate: 0.15 },
        { min: 1200000, max: 1500000, rate: 0.20 },
        { min: 1500000, max: Infinity, rate: 0.30 }
      ];
      
      newSlabs.forEach((slab) => {
        const row = document.createElement('tr');
        const slabRange = slab.max === Infinity ? 
          `Above ₹${formatNumber(slab.min)}` : 
          `₹${formatNumber(slab.min)} - ₹${formatNumber(slab.max)}`;
        
        row.innerHTML = `
          <td>${slabRange}</td>
          <td>${slab.rate === 0 ? 'Nil' : `${slab.rate * 100}%`}</td>
          <td>-</td>
        `;
        newRegimeSlabsBody.appendChild(row);
      });
      
      // Initialize Old Regime slabs
      oldRegimeSlabsBody.innerHTML = '';
      const oldSlabs = [
        { min: 0, max: 250000, rate: 0 },
        { min: 250000, max: 500000, rate: 0.05 },
        { min: 500000, max: 1000000, rate: 0.20 },
        { min: 1000000, max: Infinity, rate: 0.30 }
      ];
      
      oldSlabs.forEach((slab) => {
        const row = document.createElement('tr');
        const slabRange = slab.max === Infinity ? 
          `Above ₹${formatNumber(slab.min)}` : 
          `₹${formatNumber(slab.min)} - ₹${formatNumber(slab.max)}`;
        
        row.innerHTML = `
          <td>${slabRange}</td>
          <td>${slab.rate === 0 ? 'Nil' : `${slab.rate * 100}%`}</td>
          <td>-</td>
        `;
        oldRegimeSlabsBody.appendChild(row);
      });
    }
    
    function calculateTax(shouldScroll = true) {
      // Show loading state
      calculateBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Calculating...';
      calculateBtn.disabled = true;
      
      // Simulate processing delay for better UX
      setTimeout(() => {
        try {
          // Get input values
          const annualIncome = parseFloat(annualIncomeInput.value) || 0;
          const ageGroup = ageGroupSelect.value;
          
          if (annualIncome <= 0) {
            showNotification('Please enter a valid annual income.', 'error');
            calculateBtn.innerHTML = '<i class="fas fa-calculator"></i> Calculate Tax';
            calculateBtn.disabled = false;
            return;
          }
          
          // Calculate tax for both regimes
          const newRegimeTax = calculateTaxForRegime('new', annualIncome, ageGroup);
          const oldRegimeTax = calculateTaxForRegime('old', annualIncome, ageGroup);
          
          // Store results
          calculationResults = {
            newRegime: newRegimeTax,
            oldRegime: oldRegimeTax,
            annualIncome: annualIncome,
            ageGroup: ageGroup
          };
          
          // Display results
          displayResults(newRegimeTax, oldRegimeTax);
          
          // Show results and comparison sections
          resultsSection.style.display = 'block';
          comparisonSection.style.display = 'block';
          
          // Only scroll to results if shouldScroll is true (user clicked button)
          if (shouldScroll) {
            resultsSection.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
          }
          
          // Show success notification
          showNotification('Tax calculation completed successfully!', 'success');
          
        } catch (error) {
          console.error('Tax calculation error:', error);
          showNotification('An error occurred during calculation. Please try again.', 'error');
        } finally {
          // Reset button state
          calculateBtn.innerHTML = '<i class="fas fa-calculator"></i> Calculate Tax';
          calculateBtn.disabled = false;
        }
      }, 800);
    }
    
    function calculateTaxForRegime(regime, annualIncome, ageGroup) {
      let taxableIncome = annualIncome;
      let deductions = 0;
      let basicExemption = 0;
      let slabDetails = [];
      
      // Apply regime-specific calculations
      if (regime === 'new') {
        // New regime: Standard deduction only
        const standardDeduction = 75000; // Standard deduction for new regime
        taxableIncome -= standardDeduction;
        deductions = standardDeduction;
        
        // New regime tax slabs for FY 2026-27
        const slabs = [
          { min: 0, max: 300000, rate: 0 },
          { min: 300000, max: 600000, rate: 0.05 },
          { min: 600000, max: 900000, rate: 0.10 },
          { min: 900000, max: 1200000, rate: 0.15 },
          { min: 1200000, max: 1500000, rate: 0.20 },
          { min: 1500000, max: Infinity, rate: 0.30 }
        ];
        
        // Calculate tax based on slabs
        let remainingIncome = Math.max(0, taxableIncome);
        let tax = 0;
        
        for (let i = 0; i < slabs.length; i++) {
          const slab = slabs[i];
          if (remainingIncome > slab.min) {
            const slabIncome = Math.min(remainingIncome, slab.max) - slab.min;
            if (slabIncome > 0) {
              const slabTax = slabIncome * slab.rate;
              tax += slabTax;
              slabDetails.push({
                range: `${formatNumber(slab.min)} - ${slab.max === Infinity ? 'Above' : formatNumber(slab.max)}`,
                rate: slab.rate * 100,
                tax: slabTax
              });
            }
          }
        }
        
        // Calculate surcharge
        let surcharge = 0;
        if (taxableIncome > 5000000 && taxableIncome <= 10000000) {
          surcharge = tax * 0.10; // 10% surcharge
        } else if (taxableIncome > 10000000 && taxableIncome <= 20000000) {
          surcharge = tax * 0.15; // 15% surcharge
        } else if (taxableIncome > 20000000 && taxableIncome <= 50000000) {
          surcharge = tax * 0.25; // 25% surcharge
        } else if (taxableIncome > 50000000) {
          surcharge = tax * 0.37; // 37% surcharge
        }
        
        // Calculate cess (4% health and education cess)
        const cess = (tax + surcharge) * 0.04;
        const totalTax = tax + surcharge + cess;
        const netIncome = annualIncome - totalTax;
        const effectiveTaxRate = (totalTax / annualIncome) * 100;
        
        return {
          regime,
          annualIncome,
          taxableIncome: Math.max(0, taxableIncome),
          deductions,
          tax,
          surcharge,
          cess,
          totalTax,
          netIncome,
          effectiveTaxRate,
          slabDetails
        };
        
      } else {
        // Old regime calculations
        const section80C = Math.min(parseFloat(section80CInput.value) || 0, 150000);
        const section80D = Math.min(parseFloat(section80DInput.value) || 0, 50000);
        const section80E = parseFloat(section80EInput.value) || 0;
        const hra = parseFloat(hraInput.value) || 0;
        const standardDeduction = 50000; // Standard deduction for old regime
        
        // Calculate total deductions
        deductions = standardDeduction + section80C + section80D + section80E + hra;
        
        // Apply basic exemption based on age
        if (ageGroup === 'below60') {
          basicExemption = 250000;
        } else if (ageGroup === '60to80') {
          basicExemption = 300000;
        } else {
          basicExemption = 500000;
        }
        
        // Calculate taxable income
        taxableIncome = annualIncome - deductions;
        taxableIncome = Math.max(0, taxableIncome - basicExemption);
        
        // Old regime tax slabs for FY 2026-27
        const slabs = [
          { min: 0, max: 250000, rate: 0 },
          { min: 250000, max: 500000, rate: 0.05 },
          { min: 500000, max: 1000000, rate: 0.20 },
          { min: 1000000, max: Infinity, rate: 0.30 }
        ];
        
        // Calculate tax based on slabs
        let remainingIncome = taxableIncome;
        let tax = 0;
        
        for (let i = slabs.length - 1; i >= 0; i--) {
          const slab = slabs[i];
          if (remainingIncome > slab.min) {
            const slabIncome = Math.min(remainingIncome, slab.max) - slab.min;
            if (slabIncome > 0) {
              const slabTax = slabIncome * slab.rate;
              tax += slabTax;
              slabDetails.push({
                range: `${formatNumber(slab.min)} - ${slab.max === Infinity ? 'Above' : formatNumber(slab.max)}`,
                rate: slab.rate * 100,
                tax: slabTax
              });
              remainingIncome = slab.min;
            }
          }
        }
        
        // Calculate surcharge
        let surcharge = 0;
        if (taxableIncome > 5000000 && taxableIncome <= 10000000) {
          surcharge = tax * 0.10; // 10% surcharge
        } else if (taxableIncome > 10000000 && taxableIncome <= 20000000) {
          surcharge = tax * 0.15; // 15% surcharge
        } else if (taxableIncome > 20000000 && taxableIncome <= 50000000) {
          surcharge = tax * 0.25; // 25% surcharge
        } else if (taxableIncome > 50000000) {
          surcharge = tax * 0.37; // 37% surcharge
        }
        
        // Calculate cess (4% health and education cess)
        const cess = (tax + surcharge) * 0.04;
        const totalTax = tax + surcharge + cess;
        const netIncome = annualIncome - totalTax;
        const effectiveTaxRate = (totalTax / annualIncome) * 100;
        
        return {
          regime,
          annualIncome,
          taxableIncome,
          deductions: deductions + basicExemption,
          tax,
          surcharge,
          cess,
          totalTax,
          netIncome,
          effectiveTaxRate,
          slabDetails
        };
      }
    }
    
    function displayResults(newRegimeTax, oldRegimeTax) {
      // Determine which regime to show based on current selection
      const currentTax = currentRegime === 'new' ? newRegimeTax : oldRegimeTax;
      const otherTax = currentRegime === 'new' ? oldRegimeTax : newRegimeTax;
      
      // Format currency values
      const formatCurrency = (amount) => `₹${formatNumber(Math.round(amount))}`;
      const formatPercentage = (value) => `${value.toFixed(2)}%`;
      
      // Display current regime results
      totalTaxEl.textContent = formatCurrency(currentTax.totalTax);
      netIncomeEl.textContent = formatCurrency(currentTax.netIncome);
      netIncomeChangeEl.textContent = `${((currentTax.netIncome / currentTax.annualIncome) * 100).toFixed(1)}% of income`;
      effectiveTaxRateEl.textContent = formatPercentage(currentTax.effectiveTaxRate);
      taxRateChangeEl.textContent = `vs ${formatPercentage(otherTax.effectiveTaxRate)}`;
      taxRateChangeEl.className = `result-change ${currentTax.effectiveTaxRate < otherTax.effectiveTaxRate ? 'positive' : 'negative'}`;
      totalDeductionsEl.textContent = formatCurrency(currentTax.deductions);
      taxableIncomeEl.textContent = formatCurrency(currentTax.taxableIncome);
      incomeTaxEl.textContent = formatCurrency(currentTax.tax);
      surchargeEl.textContent = formatCurrency(currentTax.surcharge);
      cessEl.textContent = formatCurrency(currentTax.cess);
      totalPayableEl.textContent = formatCurrency(currentTax.totalTax);
      
      // Update comparison section
      newRegimeTaxEl.textContent = formatCurrency(newRegimeTax.totalTax);
      oldRegimeTaxEl.textContent = formatCurrency(oldRegimeTax.totalTax);
      
      // Calculate savings
      const savings = oldRegimeTax.totalTax - newRegimeTax.totalTax;
      if (savings > 0) {
        newRegimeSavingsEl.textContent = `Save ₹${formatNumber(Math.round(savings))}`;
        newRegimeSavingsEl.className = 'regime-savings positive';
        oldRegimeSavingsEl.textContent = `Pay ₹${formatNumber(Math.round(savings))} more`;
        oldRegimeSavingsEl.className = 'regime-savings negative';
        
        // Update recommendation
        recommendationTextEl.innerHTML = `Based on your income and deductions, the <strong>New Tax Regime</strong> appears to be better for you as it saves you ₹${formatNumber(Math.round(savings))} in taxes.`;
        
        // Highlight new regime as best
        newRegimeComparison.classList.add('best');
        oldRegimeComparison.classList.remove('best');
      } else if (savings < 0) {
        newRegimeSavingsEl.textContent = `Pay ₹${formatNumber(Math.round(-savings))} more`;
        newRegimeSavingsEl.className = 'regime-savings negative';
        oldRegimeSavingsEl.textContent = `Save ₹${formatNumber(Math.round(-savings))}`;
        oldRegimeSavingsEl.className = 'regime-savings positive';
        
        // Update recommendation
        recommendationTextEl.innerHTML = `Based on your income and deductions, the <strong>Old Tax Regime</strong> appears to be better for you as it saves you ₹${formatNumber(Math.round(-savings))} in taxes.`;
        
        // Highlight old regime as best
        oldRegimeComparison.classList.add('best');
        newRegimeComparison.classList.remove('best');
      } else {
        newRegimeSavingsEl.textContent = 'Same tax liability';
        newRegimeSavingsEl.className = 'regime-savings';
        oldRegimeSavingsEl.textContent = 'Same tax liability';
        oldRegimeSavingsEl.className = 'regime-savings';
        
        // Update recommendation
        recommendationTextEl.innerHTML = `Both tax regimes result in the same tax liability. You can choose either based on your preference.`;
        
        // Remove best highlight
        newRegimeComparison.classList.remove('best');
        oldRegimeComparison.classList.remove('best');
      }
      
      // Update tax slab tables with calculated amounts
      updateSlabTables(newRegimeTax, oldRegimeTax);
    }
    
    function updateSlabTables(newRegimeTax, oldRegimeTax) {
      // Update New Regime slabs
      newRegimeSlabsBody.innerHTML = '';
      const newSlabs = [
        { min: 0, max: 300000, rate: 0 },
        { min: 300000, max: 600000, rate: 0.05 },
        { min: 600000, max: 900000, rate: 0.10 },
        { min: 900000, max: 1200000, rate: 0.15 },
        { min: 1200000, max: 1500000, rate: 0.20 },
        { min: 1500000, max: Infinity, rate: 0.30 }
      ];
      
      // Calculate tax for each slab based on taxable income
      let remainingIncome = Math.max(0, newRegimeTax.taxableIncome);
      newSlabs.forEach((slab, index) => {
        const row = document.createElement('tr');
        const slabRange = slab.max === Infinity ? 
          `Above ₹${formatNumber(slab.min)}` : 
          `₹${formatNumber(slab.min)} - ₹${formatNumber(slab.max)}`;
        
        // Calculate tax for this slab
        let slabTax = 0;
        if (remainingIncome > slab.min) {
          const slabIncome = Math.min(remainingIncome, slab.max) - slab.min;
          slabTax = slabIncome * slab.rate;
        }
        
        // Check if this slab contains the user's taxable income
        const isCurrentSlab = newRegimeTax.taxableIncome > slab.min && newRegimeTax.taxableIncome <= slab.max;
        
        row.innerHTML = `
          <td>${slabRange}</td>
          <td>${slab.rate === 0 ? 'Nil' : `${slab.rate * 100}%`}</td>
          <td>${slabTax > 0 ? `₹${formatNumber(Math.round(slabTax))}` : '-'}</td>
        `;
        
        if (isCurrentSlab) {
          row.classList.add('slab-highlight');
        }
        
        newRegimeSlabsBody.appendChild(row);
      });
      
      // Update Old Regime slabs
      oldRegimeSlabsBody.innerHTML = '';
      const oldSlabs = [
        { min: 0, max: 250000, rate: 0 },
        { min: 250000, max: 500000, rate: 0.05 },
        { min: 500000, max: 1000000, rate: 0.20 },
        { min: 1000000, max: Infinity, rate: 0.30 }
      ];
      
      remainingIncome = Math.max(0, oldRegimeTax.taxableIncome);
      oldSlabs.forEach((slab, index) => {
        const row = document.createElement('tr');
        const slabRange = slab.max === Infinity ? 
          `Above ₹${formatNumber(slab.min)}` : 
          `₹${formatNumber(slab.min)} - ₹${formatNumber(slab.max)}`;
        
        // Calculate tax for this slab
        let slabTax = 0;
        if (remainingIncome > slab.min) {
          const slabIncome = Math.min(remainingIncome, slab.max) - slab.min;
          slabTax = slabIncome * slab.rate;
        }
        
        // Check if this slab contains the user's taxable income
        const isCurrentSlab = oldRegimeTax.taxableIncome > slab.min && oldRegimeTax.taxableIncome <= slab.max;
        
        row.innerHTML = `
          <td>${slabRange}</td>
          <td>${slab.rate === 0 ? 'Nil' : `${slab.rate * 100}%`}</td>
          <td>${slabTax > 0 ? `₹${formatNumber(Math.round(slabTax))}` : '-'}</td>
        `;
        
        if (isCurrentSlab) {
          row.classList.add('slab-highlight');
        }
        
        oldRegimeSlabsBody.appendChild(row);
      });
    }
    
    function saveResults() {
      if (!calculationResults) {
        showNotification('Please calculate tax first before saving.', 'warning');
        return;
      }
      
      // Create a printable report
      const currentTax = currentRegime === 'new' ? calculationResults.newRegime : calculationResults.oldRegime;
      const otherTax = currentRegime === 'new' ? calculationResults.oldRegime : calculationResults.newRegime;
      
      const report = `
Tax Calculation Report - FY 2026-27
===================================
Generated on: ${new Date().toLocaleDateString()}
Annual Income: ₹${formatNumber(calculationResults.annualIncome)}
Age Group: ${ageGroupSelect.options[ageGroupSelect.selectedIndex].text}
Selected Tax Regime: ${currentRegime === 'new' ? 'New Regime' : 'Old Regime'}

TAX CALCULATION RESULTS:
=======================
Total Tax Liability: ₹${formatNumber(Math.round(currentTax.totalTax))}
Net Income (After Tax): ₹${formatNumber(Math.round(currentTax.netIncome))}
Effective Tax Rate: ${currentTax.effectiveTaxRate.toFixed(2)}%
Total Deductions: ₹${formatNumber(Math.round(currentTax.deductions))}
Taxable Income: ₹${formatNumber(Math.round(currentTax.taxableIncome))}

BREAKDOWN:
==========
Income Tax: ₹${formatNumber(Math.round(currentTax.tax))}
Surcharge: ₹${formatNumber(Math.round(currentTax.surcharge))}
Cess (4%): ₹${formatNumber(Math.round(currentTax.cess))}

REGIME COMPARISON:
==================
New Regime Tax: ₹${formatNumber(Math.round(calculationResults.newRegime.totalTax))}
Old Regime Tax: ₹${formatNumber(Math.round(calculationResults.oldRegime.totalTax))}
Savings with ${calculationResults.newRegime.totalTax < calculationResults.oldRegime.totalTax ? 'New' : 'Old'} Regime: ₹${formatNumber(Math.round(Math.abs(calculationResults.newRegime.totalTax - calculationResults.oldRegime.totalTax)))}

Note: This is an estimated calculation for informational purposes only.
Please consult a tax professional for official tax filing.

Generated by Toolsedito Tax Calculator (https://www.toolsedito.com/tax-calculator.html)
      `;
      
      // Create download link
      const blob = new Blob([report], { type: 'text/plain' });
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url;
      a.download = `tax-calculator-report-${new Date().toISOString().split('T')[0]}.txt`;
      document.body.appendChild(a);
      a.click();
      document.body.removeChild(a);
      URL.revokeObjectURL(url);
      
      showNotification('Tax calculation report downloaded successfully!', 'success');
    }
    
    function showNotification(message, type = 'info') {
      // Create notification element
      const notification = document.createElement('div');
      notification.style.cssText = `
        position: fixed;
        top: 100px;
        right: 20px;
        padding: 15px 20px;
        background: ${type === 'success' ? '#10b981' : type === 'error' ? '#ef4444' : type === 'warning' ? '#f59e0b' : '#3b82f6'};
        color: white;
        border-radius: 8px;
        box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        z-index: 10000;
        font-weight: 500;
        display: flex;
        align-items: center;
        gap: 10px;
        animation: slideIn 0.3s ease;
      `;
      
      notification.innerHTML = `
        <i class="fas fa-${type === 'success' ? 'check-circle' : type === 'error' ? 'exclamation-circle' : type === 'warning' ? 'exclamation-triangle' : 'info-circle'}"></i>
        ${message}
      `;
      
      document.body.appendChild(notification);
      
      // Remove notification after 3 seconds
      setTimeout(() => {
        notification.style.animation = 'slideOut 0.3s ease';
        setTimeout(() => {
          document.body.removeChild(notification);
        }, 300);
      }, 3000);
      
      // Add CSS animations
      if (!document.querySelector('#notification-styles')) {
        const style = document.createElement('style');
        style.id = 'notification-styles';
        style.textContent = `
          @keyframes slideIn {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
          }
          @keyframes slideOut {
            from { transform: translateX(0); opacity: 1; }
            to { transform: translateX(100%); opacity: 0; }
          }
        `;
        document.head.appendChild(style);
      }
    }

    // Track tool usage for analytics (AdSense compliant)
    document.querySelectorAll('.action-btn').forEach(button => {
      button.addEventListener('click', function(e) {
        const action = this.textContent.trim();
        console.log(`Tax Calculator action: ${action}`);
        // You can add Google Analytics tracking here
        // gtag('event', 'tool_action', { 'action_name': action });
      });
    });
    
    // Calculate tax on page load but don't scroll
    setTimeout(() => {
      calculateTax(false);
    }, 500);
  </script>
</body>
</html>
